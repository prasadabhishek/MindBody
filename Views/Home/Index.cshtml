@{
    ViewBag.Title = "Home Page";
}

<div class="page-header text-center">
    <h2>MindBody Homework Assignement</h2>
</div>
<div class="ui-dropdownchecklist ui-dropdownchecklist-dropcontainer-wrapper ui-widget">
    <div class="col-md-2" title="Staff" >
        <b>Staff Member</b>
        @Html.DropDownList("selectedStaffId", (SelectList)ViewBag.staffList, new { @onchange = "CallChangefunc(this.value)", @class = "dropdown" })
    </div>
    <div class="col-md-10">
        <table id="grid" class="table table-striped table-bordered"></table>
    </div>
</div>
<link href="~/Content/jquery.jqGrid/ui.jqgrid.css" rel="stylesheet" />
<link href="~/Content/bootstrap.min.css" rel="stylesheet" />
<script src="~/Scripts/jquery-1.10.2.min.js"></script>
<script src="~/Scripts/jquery-ui-1.10.0.min.js"></script>
<script src="~/Scripts/i18n/grid.locale-en.js"></script>
<script src="~/Scripts/jquery.jqGrid.min.js"></script>
<script src="~/Scripts/Appointments.js"></script>
<script>
    function CallChangefunc(val) {
        var url = '/Home/GridData?value=' + val + '&text=' + $("#selectedStaffId option:selected").text();
        $("#grid").jqGrid('setGridParam', { url: url });
        $("#grid").setGridParam({ datatype: 'json', page: 1 }).trigger('reloadGrid');
    }
</script>
